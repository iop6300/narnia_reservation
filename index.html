<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ë‚˜ë‹ˆì•„ë© ì²´í—˜ ì˜ˆì•½</title>
  <meta name="description" content="ë‚˜ë‹ˆì•„ë© í–‰ì‚¬ ì˜ˆì•½ í˜ì´ì§€" />
  <style>
:root{
  --primary:#15dcf6; --accent:#f42bce; --text:#0a1128; --muted:#667085;
  --bg:#0a1128; --cardText:#e8ecff; --btn:#0a84ff; --btnHover:#0056b3;
}

/* ========== Base ========== */
*{box-sizing:border-box}
html,body{margin:0;padding:0;scroll-behavior:smooth}
body{
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;
  color:var(--cardText);
  background:radial-gradient(circle at 20% 10%, #0b1330 0%, #060b1f 70%, #040816 100%);
}
a{color:inherit;text-decoration:none}

/* ê³µí†µ ì»¨í…Œì´ë„ˆ: ëª¨ë°”ì¼ 100% ~ ë°ìŠ¤í¬íƒ‘ 1100px */
.wrap{
  max-width:clamp(320px,92vw,1100px);
  margin:0 auto;
  padding-left:clamp(16px,4vw,40px);
  padding-right:clamp(16px,4vw,40px);
}

/* ========== Hero ========== */
.hero{
  position:relative;min-height:68vh;display:flex;align-items:center;overflow:hidden;
  color:#fff;background:radial-gradient(1200px 600px at 20% 10%, #111b3a 0%, #0a1128 60%, #071024 100%);
}
#particles{position:absolute;inset:0}
.hero__inner{position:relative;z-index:1;padding:80px 0}
.badge{
  display:inline-block;padding:6px 10px;border-radius:999px;font-size:12px;letter-spacing:.08em;
  background:rgba(255,255,255,.12);backdrop-filter:blur(6px)
}
.title{
  font-weight:800;line-height:1.05;margin:14px 0 12px;
  font-size:clamp(32px,5vw,56px);
  background:linear-gradient(90deg,var(--primary),var(--accent));
  -webkit-background-clip:text;background-clip:text;color:transparent
}
.subtitle{color:#c9d1ff;max-width:720px;font-size:clamp(15px,2.2vw,18px)}
.cta{display:flex;gap:12px;margin-top:20px;flex-wrap:wrap}
.hero__meta{margin-top:16px;font-size:14px;color:#c9d1ff}

/* ë²„íŠ¼ (Glass) */
.btn{
  padding:12px 16px;border-radius:12px;font-weight:700;
  background:rgba(21,220,246,.15);color:#fff;border:1px solid rgba(255,255,255,.2);
  backdrop-filter:blur(6px);transition:all .25s ease
}
.btn:hover{background:linear-gradient(90deg,var(--primary),var(--accent));color:#0a1128;transform:translateY(-1px)}
.btn--ghost{background:transparent;border:1px solid rgba(255,255,255,.3)}
.btn--ghost:hover{background:rgba(255,255,255,.15)}

/* ========== Sections ========== */
section{background:#0c1332;color:#e6ebff}
.section{padding:56px 0;border-top:1px solid rgba(255,255,255,.08)}
h2{margin:0 0 12px;font-size:clamp(22px,3vw,28px);color:#fff}
.muted{color:#9fb0ff}

/* ========== Grid (option) ========== */
.grid{display:grid;gap:18px;grid-template-columns:repeat(12,1fr)}
.col-4{grid-column:span 4}.col-6{grid-column:span 6}.col-12{grid-column:span 12}
@media (max-width:900px){.col-4,.col-6{grid-column:span 12}}

/* ========== Card (Glass) ========== */
.card{
  background:rgba(255,255,255,.08);color:#f2f6ff;border:1px solid rgba(255,255,255,.15);
  border-radius:16px;box-shadow:0 6px 24px rgba(0,0,0,.35);backdrop-filter:blur(10px);
  -webkit-backdrop-filter:blur(10px);padding:20px 24px;transition:all .3s ease
}
.card:hover{background:rgba(255,255,255,.12);transform:translateY(-2px)}
.card b{color:#fff}.card span{color:#cfd7ff}

/* ========== Social Links ========== */
.social{display:flex;flex-wrap:wrap;gap:12px;margin-top:14px}
.social a{
  display:inline-flex;align-items:center;gap:8px;
  padding:10px 14px;border-radius:12px;font-weight:700;
  background:#111a3a;color:#e6ebff;border:1px solid rgba(255,255,255,.08)
}
.social a:hover{background:#1a2454}
.social svg{width:18px;height:18px}

/* ========== Reserve / About ì •ë ¬ & ì¹´ë“œ í­ í†µì¼ ========== */
#reserve .wrap,#about .wrap{
  display:flex;flex-direction:column;align-items:center;text-align:left
}
#reserve .card,#about .card{width:100%;max-width:720px;margin:0 auto;box-sizing:border-box}

/* í–‰ì‚¬ì†Œê°œ key-values ì¹´ë“œë„ ë™ì¼ í­ */
.kvs{display:grid;gap:10px;width:100%;max-width:720px}
.kv{display:flex;gap:10px}.kv b{min-width:84px}

/* ========== Form (í†µì¼/ë°˜ì‘í˜•) ========== */
/* ë¼ë²¨ í°ìƒ‰ */
#reserve label[for="student_name"],
#reserve label[for="parent_phone"],
#reserve label[for="slot"],
#reserve label[for="school_level"],
#reserve label[for="grade"],
#reserve label[for="interest"]{color:#fff;font-weight:700;font-size:14px;margin:2px 0 6px;display:block}

/* í•œ ì¤„/ë‘ ì¤„ ë ˆì´ì•„ì›ƒ */
#reserve .form-row,#reserve .form-row-1{display:grid;gap:10px}
#reserve .form-row{grid-template-columns:1fr}
#reserve .form-row-1{grid-template-columns:1fr}
@media (min-width:768px){
  #reserve .form-row{grid-template-columns:1fr 1fr}
}

/* ì…ë ¥/ì„ íƒ í•„ë“œ í†µì¼ */
#reserve input,#reserve select,#reserve textarea{
  width:100%;height:48px;padding:12px 14px;font-size:16px;border-radius:10px;
  border:1px solid rgba(255,255,255,.2);background:rgba(255,255,255,.12);color:#fff;box-sizing:border-box
}
#reserve textarea{height:auto;min-height:96px}

/* placeholder ìƒ‰ */
#reserve input::placeholder,#reserve textarea::placeholder{color:rgba(255,255,255,.8)}

/* ì…€ë ‰íŠ¸ ë“œë¡­ë‹¤ìš´ ê¸°ë³¸ */
#reserve select,#reserve select option{color:#fff;background:rgba(15,24,61,.95)}

/* â€œì˜ˆì•½ ì‹œê°„/í•™êµê¸‰â€ë§Œ ì—°í•œ íšŒìƒ‰ í†¤ */
#reserve select#slot,#reserve select#school_level{
  background:rgba(255,255,255,.12);border:1px solid rgba(255,255,255,.2);transition:background .2s ease
}
#reserve select#slot:hover,#reserve select#school_level:hover{background:rgba(255,255,255,.12)}

/* Focus ì ‘ê·¼ì„± */
#reserve input:focus,#reserve select:focus,#reserve textarea:focus{
  border-color:rgba(255,255,255,.5);box-shadow:0 0 0 2px rgba(255,255,255,.25);outline:none
}

/* ì œì¶œ ë²„íŠ¼ */
.submit{
  width:100%;padding:14px;border:0;border-radius:12px;background:var(--btn);color:#fff;
  font-size:16px;font-weight:800;cursor:pointer;transition:background .25s ease
}
.submit:hover{background:var(--btnHover)}
.note{font-size:12px;color:#cbd5f3;margin-top:8px}
.success{display:none;margin-top:10px;color:#0aef8b;font-weight:800}

/* ì„¹ì…˜ êµ¬ë¶„ì„  */
.section{border-top:1px solid rgba(255,255,255,.08)}
/* 1) ì˜ˆì•½ ì‹œê°„/í•™êµê¸‰ ë“œë¡­ë‹¤ìš´ì„ ë‹¤ë¥¸ ì…ë ¥ì¹¸ê³¼ ë™ì¼ ìŠ¤íƒ€ì¼ë¡œ í†µì¼ */
#reserve select#slot,
#reserve select#school_level {
  background: rgba(255, 255, 255, 0.12) !important;  /* ë‹¤ë¥¸ í•„ë“œì™€ ë™ì¼ */
  border: 1px solid rgba(255, 255, 255, 0.2) !important;
  color: #fff;
}

/* í˜¸ë²„ ì‹œì—ë„ ìƒ‰ ë³€í™” ì—†ì´ í†µì¼ê° ìœ ì§€ */
#reserve select#slot:hover,
#reserve select#school_level:hover {
  background: rgba(255, 255, 255, 0.12) !important;
}

/* ë“œë¡­ë‹¤ìš´ í¼ì¹œ ì˜µì…˜ ë¦¬ìŠ¤íŠ¸ëŠ” ê°€ë…ì„± ìœ ì§€ */
#reserve select,
#reserve select option {
  color:#fff;
  background: rgba(15, 24, 61, 0.95);
}

/* 2) ì˜ˆì•½í•˜ê¸° í¼ì˜ form-row ê°„ ì„¸ë¡œ ê°„ê²©(í–‰ê°„) ëŠ˜ë¦¬ê¸° */
#reserve .form-row,
#reserve .form-row-1 {
  row-gap: 14px;        /* ê°™ì€ í–‰ ì•ˆì˜ í•„ë“œ ê°„ê²© */
  margin-bottom: 18px;  /* í–‰(row)ë“¤ ì‚¬ì´ì˜ ì„¸ë¡œ ê°„ê²© */
}

/* íƒœë¸”ë¦¿ ì´ìƒì—ì„œ ê°„ê²© ì¡°ê¸ˆ ë” ì—¬ìœ  ìˆê²Œ */
@media (min-width: 768px) {
  #reserve .form-row,
  #reserve .form-row-1 {
    row-gap: 16px;
    margin-bottom: 22px;
  }
}

    
  </style>
</head>
<body>

  <!-- HERO -->
  <header class="hero">
    <canvas id="particles"></canvas>
    <div class="wrap hero__inner">
      <span class="badge">NARNIA LAB Â· OPEN EVENT</span>
      <h1 class="title">ë‚˜ë‹ˆì•„ë© ì²´í—˜ ë¶€ìŠ¤ ì˜ˆì•½</h1>
      <p class="subtitle">AIë¡œ ë§Œë“œëŠ” ë‚˜ë§Œì˜ ê²Œì„ & ì„œë¹„ìŠ¤!<br>ì•„ë˜ì—ì„œ í–‰ì‚¬ ì•ˆë‚´ë¥¼ í™•ì¸í•˜ì‹œê³ , ì›í•˜ì‹œëŠ” ì‹œê°„ìœ¼ë¡œ ì˜ˆì•½í•´ ì£¼ì„¸ìš”.<br>ë™ì¼ ì‹œê°„ì€ ìµœëŒ€ 4ëª…ê¹Œì§€ ì ‘ìˆ˜ë©ë‹ˆë‹¤.</p>
      <div class="cta">
        <a class="btn btn--ghost" href="#reserve">ì§€ê¸ˆ ì˜ˆì•½í•˜ê¸°</a>
        <a class="btn btn--ghost" href="#about">ë‚˜ë‹ˆì•„ë© ì•Œì•„ë³´ê¸°</a>
      </div>
      <div class="hero__meta">ì¥ì†Œ: ìš¸ì‚°ìˆ˜í•™ì²´í—˜í•œë§ˆë‹¹ B ê´‘ì¥ 9ë²ˆ ë¶€ìŠ¤ <br>ì¼ì‹œ: 2025-10-18(í† ) 10:30â€“16:30</div>
    </div>
  </header>

  <!-- RESERVE -->
  <section id="reserve" class="section">
  <div class="wrap">
    <h2>í–‰ì‚¬ ì†Œê°œ</h2>
    <p class="muted">ì•„ì´ë“¤ì´ ì§ì ‘ ë§Œë“œëŠ” ë‚˜ë§Œì˜ ì½˜í…ì¸ ! AIë¥¼ ì´ìš©í•˜ì—¬ ë‚˜ë§Œì˜ ì›¹ì„œë¹„ìŠ¤ë¥¼ ë§Œë“¤ë©° ì°½ì˜ë ¥ê³¼ ë¬¸ì œí•´ê²°ë ¥ì„ ê¸¸ëŸ¬ìš”.</p>
    <div class="card kvs" style="margin-top:14px;">
      <div class="kv"><b>ëŒ€ìƒ</b><span>ì´ˆ/ì¤‘/ê³  í•™ìƒ ë° í•™ë¶€ëª¨</span></div>
      <div class="kv"><b>ìš´ì˜</b><span>ê° íƒ€ì„ 30ë¶„, íšŒì°¨ë³„ ì •ì› 10ëª…</span></div>
      <div class="kv"><b>ì¤€ë¹„ë¬¼</b><span>ì—†ìŒ (í˜„ì¥ ì¥ë¹„ ì œê³µ)</span></div>
    </div>

    <h2 style="margin-top:32px;">ì˜ˆì•½í•˜ê¸°</h2>
    <div class="card">
        <!-- ì œì¶œ í›„ ë¦¬ë‹¤ì´ë ‰íŠ¸ ë°©ì§€ìš© -->
        <iframe name="hidden_iframe" style="display:none;" onload="if(window._submitted){document.getElementById('ok').style.display='block';}"></iframe>

        <!-- âœ… êµ¬ê¸€í¼ ACTION / ENTRY í‚¤ëŠ” ì´ë¯¸ ì‚¬ìš©ìë‹˜ í¼ ê¸°ì¤€ìœ¼ë¡œ ì„¸íŒ… -->
        <form
          action="https://docs.google.com/forms/d/e/1FAIpQLScSgLalQZ7wq4n2w8gAn04Rs4OHnRbs-nMGGV8-fyVGj2_vdA/formResponse"
          method="POST" target="hidden_iframe" onsubmit="window._submitted=true">

          <div class="form-row">
            <div>
              <label for="student_name">í•™ìƒì´ë¦„</label>
              <input id="student_name" name="entry.809640200" required placeholder="ì˜ˆ) ê¹€ë‚˜ë‹ˆ" />
            </div>
            <div>
              <label for="parent_phone">ë³´í˜¸ì ì—°ë½ì²˜</label>
              <input id="parent_phone" name="entry.543683465" required placeholder="ì˜ˆ) 010-1234-5678" />
            </div>
          </div>

          <div class="form-row">
            <div>
              <label for="slot">ì˜ˆì•½ ì‹œê°„</label>
              <select id="slot" name="entry.1621677829" required>
                <option value="">ì‹œê°„ ì„ íƒ</option>
                <option>10:30</option><option>11:00</option><option>11:30</option>
                <option>12:00</option><option>12:30</option><option>13:00</option>
                <option>13:30</option><option>14:00</option><option>14:30</option>
                <option>15:00</option><option>15:30</option><option>16:00</option><option>16:30</option>
              </select>
            </div>
            <div>
              <label for="school_level">í•™êµê¸‰</label>
              <select id="school_level" name="entry.261454937" required>
                <option value="">ì„ íƒ</option>
                <option>ì´ˆë“±í•™êµ</option><option>ì¤‘í•™êµ</option><option>ê³ ë“±í•™êµ</option>
              </select>
            </div>
          </div>

          <div class="form-row form-row-1">
            <div>
              <label for="grade">í•™ìƒ í•™ë…„</label>
              <input id="grade" name="entry.156928591" required placeholder="ì˜ˆ) 2í•™ë…„" />
            </div>
          </div>

          <div class="form-row form-row-1">
            <div>
              <label for="interest">í•™ìƒ ê´€ì‹¬ë¶„ì•¼</label>
              <input id="interest" name="entry.763983283" placeholder="ì˜ˆ) AI, ê²Œì„, ë¡œë´‡ ë“±" />
            </div>
          </div>

          <button class="submit" type="submit">ì˜ˆì•½ ì œì¶œ</button>
          <div id="ok" class="success">âœ… ì˜ˆì•½ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!</div>
          <div class="note">â€» ë™ì¼ ì‹œê°„ì€ ìµœëŒ€ 4ëª…ê¹Œì§€ ì ‘ìˆ˜ë©ë‹ˆë‹¤.</div>
        </form>
      </div>
    </div>
  </section>

<!-- ABOUT -->
<section id="about" class="section">
  <div class="wrap">
    <h2>ë‚˜ë‹ˆì•„ë© ì†Œê°œ</h2>

    <div class="card">
      <p style="margin-bottom:14px;">
        ë‚˜ë‹ˆì•„ë©ì€ ë‹¨ìˆœí•œ ì½”ë”© ê¸°ìˆ ì´ë‚˜ AI ì‚¬ìš©ë²•ì„ ê°€ë¥´ì¹˜ì§€ ì•ŠìŠµë‹ˆë‹¤.<br>
        <b>â€œê¸°ìˆ ì€ ë„êµ¬, ì„¸ìƒì„ ë°”ê¾¸ëŠ” ê²ƒì€ ìƒê°ì´ë‹¤.â€</b><br>
        ìš°ë¦¬ëŠ” ìŠ¤ìŠ¤ë¡œ ì‚¬ê³ í•˜ê³  ì§ˆë¬¸í•˜ëŠ” í˜ì„ ê¸¸ëŸ¬, <b>AIë¥¼ ë‹¤ë£¨ëŠ” ì°½ì˜ì  ì„¤ê³„ì</b>ë¥¼ í‚¤ì›ë‹ˆë‹¤.
      </p>

      <div style="display:grid; gap:16px; margin-top:16px;">
        <!-- ë¯¸ì…˜ -->
            <b>ğŸ¯ ë¯¸ì…˜</b>
            <p class="muted" style="margin:.3rem 0 0;">
              ì§ˆë¬¸ì„ í†µí•´ ìƒê°í•˜ëŠ” í˜ì„ ê¸°ë¥´ê³ ,<br>
              AIë¥¼ í™œìš©í•´ ì„¸ìƒì— ìƒˆë¡œìš´ ê°€ì¹˜ë¥¼ ì°½ì¡°í•˜ëŠ” <b>Next-generation Architect</b>ë¥¼ ì–‘ì„±í•©ë‹ˆë‹¤.
            </p>
        </div>

       
        <!-- ìš´ì˜ ë°©ì‹ -->
      <br><br>
            <b>âš™ï¸ ìš´ì˜ ë°©ì‹</b>
            <p class="muted" style="margin:.3rem 0 0;">
              <b>AI-PBL ê¸°ë°˜ ëª°ì…í˜• í•™ìŠµ</b>ìœ¼ë¡œ í”„ë¡œì íŠ¸ ì¤‘ì‹¬ì˜ ì‹¤ìŠµì„ í†µí•´ ë°°ìš°ê³  ì„±ì¥í•©ë‹ˆë‹¤.<br>
              í•™ìŠµ ìˆ˜ì¤€ì— ë”°ë¼ ë‘ ê°€ì§€ íŠ¸ë™ìœ¼ë¡œ ìš´ì˜ë©ë‹ˆë‹¤:
            </p>
            <ul style="margin:.4rem 0 0; padding-left:18px; line-height:1.6;">
              <li><b>Elite Track</b> â€” ì‹¬í™” ì‹¤ìŠµ ì¤‘ì‹¬ì˜ ì†Œìˆ˜ ì •ì˜ˆ í”„ë¡œì íŠ¸í˜• êµìœ¡</li>
              <li><b>Public Track</b> â€” ì²´í—˜ ì¤‘ì‹¬ì˜ ê¸°ë³¸ê¸° ê°•í™”í˜• êµìœ¡</li>
            </ul>
        
        </div>

      <!-- ì†Œì…œ ë§í¬ -->
      <div class="social" style="margin-top:20px;">
        <a href="https://www.instagram.com/narnialab_official/?hl=ko" target="_blank" rel="noopener">
          <svg viewBox="0 0 24 24" fill="none"><path d="M7 2h10a5 5 0 0 1 5 5v10a5 5 0 0 1-5 5H7a5 5 0 0 1-5-5V7a5 5 0 0 1 5-5Z" stroke="currentColor" stroke-width="1.5"/><circle cx="12" cy="12" r="3.8" stroke="currentColor" stroke-width="1.5"/><circle cx="17.5" cy="6.5" r="1.2" fill="currentColor"/></svg>
          Instagram
        </a>
        <a href="https://narnia-lab.github.io/home/#home" target="_blank" rel="noopener">
          <svg viewBox="0 0 24 24" fill="none"><path d="M3 10.5 12 3l9 7.5v9a1.5 1.5 0 0 1-1.5 1.5H4.5A1.5 1.5 0 0 1 3 19.5v-9Z" stroke="currentColor" stroke-width="1.5"/><path d="M9 21v-6h6v6" stroke="currentColor" stroke-width="1.5"/></svg>
          í™ˆí˜ì´ì§€
        </a>
        <a href="http://pf.kakao.com/_DZhmn" target="_blank" rel="noopener">
          <svg viewBox="0 0 24 24" fill="none"><path d="M12 3.5c-5.25 0-9.5 3.39-9.5 7.56 0 2.67 1.83 4.99 4.59 6.27l-.78 3.09a.7.7 0 0 0 1.05.77l3.66-2.15c.95.15 1.94.23 2.98.23 5.25 0 9.5-3.39 9.5-7.56S17.25 3.5 12 3.5Z" stroke="currentColor" stroke-width="1.5"/></svg>
          ì¹´ì¹´ì˜¤í†¡
        </a>
      </div>
    </div>
  </div>
</section>



  
  <footer>
    <div class="wrap">Â© 2025 Narnia Lab. All Rights Reserved.</div>
  </footer>

  <!-- Particles (ê°€ë²¼ìš´ ìº”ë²„ìŠ¤ ë°°ê²½) -->
  <script>
    const canvas = document.getElementById('particles');
    const ctx = canvas.getContext('2d');
    let W,H, points=[];

    function resize(){
      W = canvas.width = canvas.offsetWidth = canvas.parentElement.offsetWidth;
      H = canvas.height = canvas.offsetHeight = canvas.parentElement.offsetHeight;
      // ì´ˆê¸°í™” (í™”ë©´ í¬ê¸°ì— ë”°ë¼ í¬ì¸íŠ¸ ê°¯ìˆ˜ ì¡°ì ˆ)
      const count = Math.max(60, Math.floor(W * H / 26000));
      points = Array.from({length: count}).map(()=>({
        x: Math.random()*W, y: Math.random()*H,
        vx:(Math.random()*2-1)*0.6, vy:(Math.random()*2-1)*0.6
      }));
    }
    window.addEventListener('resize', resize, {passive:true});
    resize();

    function step(){
      ctx.clearRect(0,0,W,H);
      // ì  ì´ë™ + ê·¸ë¦¬ê¸°
      for(const p of points){
        p.x += p.vx; p.y += p.vy;
        if(p.x<0||p.x>W) p.vx*=-1;
        if(p.y<0||p.y>H) p.vy*=-1;
        ctx.globalAlpha = 0.7;
        ctx.fillStyle = '#ffffff';
        ctx.beginPath(); ctx.arc(p.x,p.y,1.3,0,Math.PI*2); ctx.fill();
      }
      // ë¼ì¸ ì—°ê²°
      for(let i=0;i<points.length;i++){
        for(let j=i+1;j<points.length;j++){
          const a=points[i], b=points[j];
          const dx=a.x-b.x, dy=a.y-b.y;
          const d2=dx*dx+dy*dy;
          if(d2<140*140){
            ctx.globalAlpha = 0.05 + (1 - d2/(140*140))*0.15;
            ctx.strokeStyle = '#ffffff';
            ctx.beginPath(); ctx.moveTo(a.x,a.y); ctx.lineTo(b.x,b.y); ctx.stroke();
          }
        }
      }
      requestAnimationFrame(step);
    }
    step();
  </script>

  <!-- ì§‘ê³„ CSVë¥¼ ë¶ˆëŸ¬ì™€ ì¸ì›ìˆ˜ >=10 ì‹œê°„ëŒ€ (ë§ˆê°) ì²˜ë¦¬ -->
  <script>
    /* ğŸ‘‰ ì´ URLë§Œ ë³¸ì¸ ê²ƒìœ¼ë¡œ êµì²´í•˜ì„¸ìš”! (raw CSV) */
    const CSV_URL = "PUT_YOUR_PUBLIC_CSV_URL_HERE"; // ì˜ˆ: https://raw.githubusercontent.com/<user>/<repo>/main/booth-count.csv
    const MAX_PEOPLE = 4;

    function normalize(s){ return String(s||'').replace(/^\uFEFF/,'').replace(/\u00A0/g,' ').trim(); }

    async function fetchCSV(url){
      const res = await fetch(url + (url.includes('?')?'&':'?') + '_ts=' + Date.now(), {redirect:'follow'});
      if(!res.ok) throw new Error(res.status + ' ' + res.statusText);
      return await res.text();
    }
    function parseCSV(text){
      const lines = text.replace(/^\uFEFF/,'').trim().split(/\r?\n/);
      return lines.map(line => line.split(',').map(v=>normalize(v)));
    }
    function applyCounts(map){
      const sel = document.getElementById('slot');
      if(!sel) return;
      [...sel.options].forEach(opt=>{
        if(!opt.value) return;
        const key = normalize(opt.value);
        const cnt = Number(map.get(key)||0);
        if(cnt >= MAX_PEOPLE){
          opt.disabled = true;
          if(!/\(ë§ˆê°\)$/.test(opt.textContent)) opt.textContent = opt.textContent + ' (ë§ˆê°)';
        } else {
          opt.disabled = false;
          opt.textContent = opt.textContent.replace(/\s*\(ë§ˆê°\)$/,'');
        }
      });
      if(sel.selectedOptions[0]?.disabled) sel.value="";
    }
    async function refreshCloseSlots(){
      try{
        const csv = await fetchCSV(CSV_URL);
        const rows = parseCSV(csv);
        if(!rows.length) return;
        const header = rows[0].map(normalize);
        const timeIdx = header.findIndex(h=>/ì˜ˆì•½\s*ì‹œê°„|ì‹œê°„|slot/i.test(h));
        const cntIdx  = header.findIndex(h=>/ì¸ì›|ì¸ì›ìˆ˜|count/i.test(h));
        const map = new Map();
        rows.slice(1).forEach(r=>{
          const t = normalize(r[timeIdx]);
          const c = Number(normalize(r[cntIdx]))||0;
          if(t) map.set(t,c);
        });
        applyCounts(map);
      }catch(e){ console.error('[ë§ˆê°] CSV ë¡œë“œ ì˜¤ë¥˜', e); }
    }
    refreshCloseSlots();
    setInterval(refreshCloseSlots, 60*1000);
  </script>
</body>
</html>
